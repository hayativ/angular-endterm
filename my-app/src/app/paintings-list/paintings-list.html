<div class="search-container">
  <input
    type="text"
    [(ngModel)]="searchTerm"
    (input)="onSearchChange($event)"
    [placeholder]="t.searchPlaceholder"
    class="search-input"
  />
</div>

<div class="controls-container">
  <button (click)="loadPaintings()">{{ t.viewCollection }}</button>
  
  <div class="page-size-selector">
    <label for="pageSize">{{ t.itemsPerPage }}</label>
    <select id="pageSize" [value]="itemsPerPage" (change)="onPageSizeChange($event)">
      @for (size of pageSizeOptions; track size) {
        <option [value]="size" [selected]="size === itemsPerPage">{{ size }}</option>
      }
    </select>
  </div>
</div>

@if (loading) {
  <div class="loading-state">
    <p>{{ t.loading }}</p>
  </div>
}

@if (errorMessage) {
  <div class="error-state">
    <p class="error">{{ errorMessage }}</p>
  </div>
}

@if (paintings.length > 0) {
  <div class="results-info">
    <p>{{ t.showing }} {{ paintings.length }} {{ t.of }} {{ totalCount }} {{ t.results }} ({{ t.page }} {{ currentPage }} {{ t.of }} {{ totalPages }})</p>
  </div>

  <ul class="paintings-grid">
    @for (painting of paintings; track painting.id) {
      <app-painting-card
        [painting]="painting"
        [getImageUrl]="getImageUrl.bind(this)">
      </app-painting-card>
    }
  </ul>

  <!-- Pagination Controls -->
  @if (totalPages > 1) {
    <div class="pagination">
      <button 
        class="pagination-btn"
        (click)="previousPage()"
        [disabled]="currentPage === 1"
      >
        {{ t.previous }}
      </button>
      
      @for (page of getPageNumbers(); track page) {
        <button 
          class="pagination-btn"
          [class.active]="page === currentPage"
          (click)="goToPage(page)"
        >
          {{ page }}
        </button>
      }
      
      <button 
        class="pagination-btn"
        (click)="nextPage()"
        [disabled]="currentPage === totalPages"
      >
        {{ t.next }}
      </button>
    </div>
  }
} @else if (!loading && !errorMessage) {
  <div class="empty-state">
    <p>{{ t.noData }}</p>
  </div>
}
